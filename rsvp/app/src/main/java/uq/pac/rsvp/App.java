/*
 * This source file was generated by the Gradle 'init' task
 */
package uq.pac.rsvp;

import java.io.IOException;
import java.nio.file.Path;

import com.cedarpolicy.model.exception.InternalException;

import uq.pac.rsvp.policy.ast.Policy;
import uq.pac.rsvp.policy.ast.PolicySet;

public class App {

    // Currently the app just accepts zero or more cedar policy file paths as
    // arguments which are parsed and the resulting policies and conditions printed
    // to stdout.
    public static void main(String[] args) throws IOException, InternalException {

        // Parse each command line arg as a policy ast file
        for (String arg : args) {
            Path input = Path.of(arg).toAbsolutePath();
            PolicySet policies = PolicySet.parseCedarPolicySet(input);

            // Print it out
            System.out.println("file: " + input);

            int i = 1;
            for (Policy policy : policies) {
                System.out.println("[" + i + "]    " + policy.toString());
                i++;
            }
        }
    }
}
